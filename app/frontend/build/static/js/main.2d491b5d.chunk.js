(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports={Form:"Form_Form__35evd",Input:"Form_Input__2yNBJ",TextArea:"Form_TextArea__nERNY",Select:"Form_Select__2aztZ"}},22:function(e,t,n){e.exports={Button:"Button_Button__30-l0",secondary:"Button_secondary__1sG9u",tertiary:"Button_tertiary__46w0_",Icon:"Button_Icon__3NC72"}},34:function(e,t,n){e.exports={TaskPage:"TaskPage_TaskPage__dsmbv",TaskStateCardboard:"TaskPage_TaskStateCardboard__nXgV7"}},35:function(e,t,n){e.exports={ProjectApp:"ProjectApp_ProjectApp__28aRI",Header:"ProjectApp_Header__73DdP",Footer:"ProjectApp_Footer__3qiv9"}},36:function(e,t,n){e.exports={ButtonBar:"ButtonBar_ButtonBar__3Hlhu",left:"ButtonBar_left__2MPMI"}},37:function(e,t,n){e.exports={Card:"Card_Card__3Le3B",CardLabel:"Card_CardLabel__2UMay",CardTitle:"Card_CardTitle__1EI_A"}},44:function(e,t,n){e.exports={TaskListPage:"TaskListPage_TaskListPage__2FQUe",ButtonBar:"TaskListPage_ButtonBar__2bogz"}},46:function(e,t,n){e.exports={Cardboard:"Cardboard_Cardboard__2C6gP"}},58:function(e,t,n){e.exports={AddTaskPage:"AddTaskPage_AddTaskPage__1WbrF"}},59:function(e,t,n){e.exports={ProjectsPage:"ProjectsPage_ProjectsPage__jp7SS"}},60:function(e,t,n){e.exports={NavButton:"NavButton_NavButton__TPecM"}},67:function(e,t,n){e.exports=n(93)},93:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(49),c=n(6),o=n(17),l=n(11),u=n(62),i=n(7),s=n(64),d=n(53),m=n(51),p=n(2),E="http://localhost:4000",f="ws://localhost:4000/graphql";var h=n(54),g=n(55),k=n(63),v=n(56),b=n(65),j=n(9),_=a.createContext({openRootPage:function(){},openTasksPage:function(e){},openTaskPage:function(e,t){},openAddTaskPage:function(e){}}),P=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(k.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).openRootPage=function(){n.props.history.push("")},n.openTasksPage=function(e){n.props.history.push("/project/".concat(e,"/tasks"))},n.openTaskPage=function(e,t){n.props.history.push("/project/".concat(e,"/tasks/").concat(t))},n.openAddTaskPage=function(e){n.props.history.push("/project/".concat(e,"/addtaks"))},n}return Object(b.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return a.createElement(_.Provider,{value:{openRootPage:this.openRootPage,openTasksPage:this.openTasksPage,openTaskPage:this.openTaskPage,openAddTaskPage:this.openAddTaskPage}},this.props.children)}}]),t}(a.Component),T=Object(j.e)(P);function I(){return a.useContext(_)}var N=n(35),C=n.n(N),y=n(13),S=n(58),w=n.n(S),B=n(14),O=n.n(B),A=n(12),x=n(33),D=n(21),F=n(18),L=n.n(F);function $(e){var t=e.children;return a.createElement("div",{className:L.a.Form},t)}function M(e){var t=e.label,n=e.value,r=e.onChange;return a.createElement("div",{className:L.a.Input},a.createElement("label",null,t),a.createElement("input",{type:"text",value:n,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return r(e.currentTarget.value)})}))}function Y(e){var t=e.label,n=e.value,r=e.onChange;return a.createElement("div",{className:L.a.TextArea},a.createElement("label",null,t),a.createElement("textarea",{rows:5,value:n,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return r(e.currentTarget.value)})}))}function q(e){var t=e.label,n=e.value,r=e.options,c=e.onNewValue;return a.createElement("div",{className:L.a.Select},a.createElement("label",null,t),a.createElement("select",{onChange:function(e){var t=e.currentTarget.value;c("UNSELECTED"===t?"":t)},value:""===n?"UNSELECTED":n},a.createElement("option",{value:"UNSELECTED"}),r.map(function(e){return a.createElement("option",{key:e.value,value:e.value},e.label)})))}var U=n(36),R=n.n(U);function H(e){var t=e.left,n=e.children,r=t?"".concat(R.a.ButtonBar," ").concat(R.a.left):R.a.ButtonBar;return a.createElement("div",{className:r},n)}var Q=n(22),G=n.n(Q),J=n(19);function V(e){var t=e.children,n=e.icon,r=e.onClick,c=e.secondary,o=e.tertiary,l=e.disabled,u=c?"".concat(G.a.Button," ").concat(G.a.secondary):o?"".concat(G.a.Button," ").concat(G.a.tertiary):G.a.Button;return a.createElement("button",{className:u,onClick:r,disabled:l},t,n&&a.createElement("span",{className:G.a.Icon},a.createElement(J.b,{icon:n})))}var W=n(32),z=n.n(W);function X(e){if(""===e)return"";var t=z()(e,"DD.MM.YYYY",!0);return t.isValid()?t.toISOString(!1):""}function Z(e){var t=e.users,n=e.onSave,r=e.onCancel,c=a.useState(""),o=Object(D.a)(c,2),l=o[0],u=o[1],i=a.useState(""),s=Object(D.a)(i,2),d=s[0],m=s[1],p=a.useState(""),E=Object(D.a)(p,2),f=E[0],h=E[1],g=a.useState(""),k=Object(D.a)(g,2),v=k[0],b=k[1],j=t.map(function(e){return{label:e.name,value:e.id}}),_=""===l||""===d||""===f||""===v||""===X(v);return a.createElement($,null,a.createElement(M,{label:"Name",value:l,onChange:u}),a.createElement(M,{label:"Finish until (DD.MM.YYYY)",value:v,onChange:b}),a.createElement(q,{label:"Assign to",value:f,options:j,onNewValue:h}),a.createElement(Y,{label:"Description",value:d,onChange:m}),a.createElement(H,null,a.createElement(V,{secondary:!0,onClick:r},"Cancel"),a.createElement(V,{disabled:_,onClick:function(){n({assigneeId:f,description:d,title:l,toBeFinishedAt:X(v)})}},"Save")))}function K(){var e=Object(y.a)(["\n  mutation AddTaskMutation($projectId: ID!, $newTask: AddTaskInput!) {\n    addTask(projectId: $projectId, input: $newTask) {\n      id\n    }\n  }\n"]);return K=function(){return e},e}function ee(){var e=Object(y.a)(["\n  query AddTaskPageQuery($projectId: ID!) {\n    project(id: $projectId) {\n      # id fetched for apollo cache only\n      id\n      title\n    }\n\n    users {\n      name\n      id\n    }\n  }\n"]);return ee=function(){return e},e}var te=O()(ee()),ne=O()(K());var ae=Object(x.a)(function(e){var t=e.match.params.projectId,n=I();return a.createElement("div",{className:w.a.AddTaskPage},a.createElement(A.b,{query:te,variables:{projectId:t}},function(e){var r=e.loading,c=e.error,o=e.data;if(r)return a.createElement("h1",null,"Loading...");if(c||!o)return console.error(c),a.createElement("h1",null,"Loading users failed");var l=o.project,u=o.users;return l?a.createElement(A.a,{mutation:ne,onCompleted:function(){return n.openTasksPage(t)}},function(e){return a.createElement(a.Fragment,null,a.createElement("header",null,a.createElement("h1",null,l.title," - Add new Task")),a.createElement(Z,{users:u,onSave:function(n){e({variables:{projectId:t,newTask:n}})},onCancel:function(){return n.openTasksPage(t)}}))}):a.createElement("h1",null,"Project not found")}))}),re=n(59),ce=n.n(re),oe=n(60),le=n.n(oe);function ue(e){var t=e.onClick;return a.createElement("button",{className:le.a.NavButton,onClick:t},a.createElement(J.b,{icon:J.a}))}function ie(){var e=Object(y.a)(["\n  query ProjectsPageQuery {\n    projects {\n      id\n      title\n      owner {\n        name\n      }\n      category {\n        name\n      }\n    }\n  }\n"]);return ie=function(){return e},e}var se=O()(ie());function de(e){var t=e.projects,n=I();return a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Name"),a.createElement("th",null,"Owner"),a.createElement("th",null,"Category"),a.createElement("th",null))),a.createElement("tbody",null,t.map(function(e){return a.createElement("tr",{key:e.id},a.createElement("td",null,e.title),a.createElement("td",null,e.owner.name),a.createElement("td",null,e.category.name),a.createElement("td",null,a.createElement(ue,{onClick:function(){return n.openTasksPage(e.id)}})))})))}function me(){return a.createElement("div",{className:ce.a.ProjectsPage},a.createElement("header",null,a.createElement("h1",null,"Your Projects")),a.createElement(A.b,{query:se},function(e){var t=e.loading,n=e.error,r=e.data;return t?a.createElement("h2",null,"Loading..."):n||!r?a.createElement("h2",null,"Sorry... Something failed while loading data "):a.createElement(de,{projects:r.projects})}))}var pe,Ee=n(44),fe=n.n(Ee);function he(e){switch(e){case pe.FINISHED:return"Finished";case pe.NEW:return"New";case pe.RUNNING:return"In Progress";default:console.warn("Unknown state: ",e)}return e}!function(e){e.FINISHED="FINISHED",e.NEW="NEW",e.RUNNING="RUNNING"}(pe||(pe={}));var ge=n(24);function ke(){var e=Object(y.a)(["\n  subscription TaskChangeSubscription($projectId: ID!) {\n    onTaskChange(projectId: $projectId) {\n      id\n      state\n    }\n  }\n"]);return ke=function(){return e},e}function ve(){var e=Object(y.a)(["\n  query TaskListPageQuery($projectId: ID!) {\n    project(id: $projectId) {\n      title\n      id\n      tasks {\n        id\n        title\n        assignee {\n          name\n        }\n        state\n      }\n    }\n  }\n"]);return ve=function(){return e},e}var be=O()(ve()),je=O()(ke());function _e(e){var t=e.projectId,n=e.tasks,r=I();return a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Name"),a.createElement("th",null,"Assignee"),a.createElement("th",null,"State"),a.createElement("th",null))),a.createElement("tbody",null,n.map(function(e){return a.createElement("tr",{key:e.id},a.createElement("td",null,e.title),a.createElement("td",null,e.assignee.name),a.createElement("td",null,he(e.state)),a.createElement("td",null,a.createElement(ue,{onClick:function(){return r.openTaskPage(t,e.id)}})))})))}function Pe(e){var t=e.match.params.projectId,n=I(),r=Object(ge.b)(be,{fetchPolicy:"cache-and-network",variables:{projectId:t}}),c=r.loading,l=r.error,u=r.data,i=r.subscribeToMore;return a.useEffect(function(){if(i&&t)return i({document:je,variables:{projectId:t}})},[t,i]),c?a.createElement("h2",null,"Loading..."):l||!u?a.createElement("h2",null,"Sorry... Something failed while loading data "):u.project?a.createElement("div",{className:fe.a.TaskListPage},a.createElement("header",null,a.createElement("h1",null,a.createElement(o.b,{to:"/"},"Projects")," > ",u.project.title," Tasks")),a.createElement(_e,{projectId:u.project.id,tasks:u.project.tasks}),a.createElement("div",{className:fe.a.ButtonBar},a.createElement(V,{onClick:function(e){return n.openAddTaskPage(t)},icon:J.a},"Add Task"))):a.createElement("h2",null,"Project not found!")}var Te=n(45),Ie=n.n(Te),Ne=n(61),Ce=n(34),ye=n.n(Ce),Se=n(46),we=n.n(Se);function Be(e){var t=e.children,n=e.className,r=n?"".concat(we.a.Cardboard," ").concat(n):we.a.Cardboard;return a.createElement("div",{className:r},t)}var Oe=n(37),Ae=n.n(Oe);function xe(e){var t=e.children;return a.createElement("div",{className:Ae.a.Card},t)}function De(e){var t=e.title,n=e.label,r=e.actions,c=r?a.createElement(H,{left:!0},r.map(function(e,t){return a.createElement(V,{key:t,tertiary:!0,onClick:e.onExecute},e.label)})):null;return a.createElement(xe,null,a.createElement("div",{className:Ae.a.CardLabel},n),a.createElement("div",{className:Ae.a.CardTitle},t),c)}function Fe(e){var t=e.task,n=e.onTaskStateChange,r=z()(t.toBeFinishedAt).format("MMM D, YYYY"),c=[{label:"Start",onExecute:function(){return n(t,pe.RUNNING)}},{label:"Stop",onExecute:function(){return n(t,pe.FINISHED)}}];return a.createElement(a.Fragment,null,a.createElement(Be,{className:ye.a.TaskStateCardboard},a.createElement(De,{label:"To be finished until",title:r}),a.createElement(De,{label:"Assignee",title:t.assignee.name}),a.createElement(De,{label:"State",title:he(t.state),actions:c})),a.createElement("h1",null,"Description"),a.createElement(xe,null,t.description))}function Le(e){var t=e.project,n=t.task,r=a.createElement(o.b,{to:"/"},"Projects"),c=a.createElement(o.b,{to:"/project/".concat(t.id,"/tasks")},t.title),l=n?a.createElement("h1",null,r," > ",c," > ",n.title):a.createElement("h1",null,r," > ",c);return a.createElement("header",null,l)}function $e(){var e=Object(y.a)(["\n  mutation UpdateTaskStateMutation($taskId: ID!, $newState: TaskState!) {\n    updateTaskState(taskId: $taskId, newState: $newState) {\n      id\n      state\n    }\n  }\n"]);return $e=function(){return e},e}function Me(){var e=Object(y.a)(["\n  query TaskPageQuery($projectId: ID!, $taskId: ID!) {\n    project(id: $projectId) {\n      id\n      title\n      task(id: $taskId) {\n        id\n        title\n        description\n        assignee {\n          name\n        }\n        toBeFinishedAt\n        state\n      }\n    }\n  }\n"]);return Me=function(){return e},e}var Ye=O()(Me()),qe=O()($e());function Ue(e){var t=e.match.params.projectId,n=e.match.params.taskId,r=Object(ge.b)(Ye,{variables:{projectId:t,taskId:n}}),c=r.loading,o=r.error,l=r.data,u=Object(ge.a)(qe),i=Object(D.a)(u,1)[0];function s(){return(s=Object(Ne.a)(Ie.a.mark(function e(t,n){return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({variables:{taskId:t.id,newState:n}});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}return c?a.createElement("h2",null,"Loading..."):o||!l?a.createElement("h2",null,"Sorry... Something failed while loading data "):l.project?a.createElement("div",{className:ye.a.TaskPage},a.createElement(Le,{project:l.project}),l.project.task?a.createElement(Fe,{task:l.project.task,onTaskStateChange:function(e,t){return s.apply(this,arguments)}}):a.createElement("h2",null,"Task cannot be found")):a.createElement("h2",null,"Project not found!")}function Re(){return a.createElement("header",{className:C.a.Header},a.createElement(o.b,{to:"/"},"Personal Project Planning"))}function He(){return a.createElement("footer",{className:C.a.Footer},a.createElement("a",{href:"https://github.com/nilshartmann/graphql-workshop",target:"_blank",rel:"noopener noreferrer"},"https://github.com/nilshartmann/graphql-workshop"))}var Qe=Object(x.a)(function(e){return e.client,a.createElement("div",{className:C.a.ProjectApp},a.createElement(Re,null),a.createElement("main",null,a.createElement(j.c,null,a.createElement(j.a,{exact:!0,path:"/",component:me}),a.createElement(j.a,{exact:!0,path:"/project/:projectId/tasks",component:Pe}),a.createElement(j.a,{exact:!0,path:"/project/:projectId/tasks/:taskId",component:Ue}),a.createElement(j.a,{exact:!0,path:"/project/:projectId/addtaks",component:ae}))),a.createElement(He,null))}),Ge=function(){var e=new s.a({uri:E}),t=new m.a({uri:f,options:{reconnect:!0}}),n=Object(i.d)(function(e){var t=e.query,n=Object(p.l)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation},t,e),a=Object(d.a)(function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.map(function(e){var t=e.message,n=e.locations,a=e.path;console.error("[GraphQL error]: ".concat(t)),console.error("LOCATIONS: ".concat(JSON.stringify(n))),console.error("PATH: ".concat(JSON.stringify(a)))}),n&&console.log("[Network error]: ".concat(n))});return new l.a({link:i.a.from([a,n]),cache:new u.a})}(),Je=a.createElement(c.b,{client:Ge},a.createElement(o.a,null,a.createElement(T,null,a.createElement(Qe,null)))),Ve=document.getElementById("root");r.render(Je,Ve)}},[[67,1,2]]]);
//# sourceMappingURL=main.2d491b5d.chunk.js.map